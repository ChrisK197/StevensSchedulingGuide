<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stevens Scheduling Guide</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="form">
    <header class="toolbar">
        <a href="index.html" class="logo-link">
            <img src="stevens_logo.png" alt="Stevens Institute of Technology" class="logo">
        </a>
        <nav class="nav-options">
            <a href="index.html" class="nav-link">Home</a>
            <a href="about.html" class="nav-link">About</a>
            <a href="contact.html" class="nav-link">Contact</a>
            <a href="login.html" class="nav-link" id="login">Log in</a>
        </nav>
    </header>
    <a href="index.html">Go back</a>
    <h1>New Schedule</h1>
    <div class="box">
        <h2>Schedule name</h2>
        <input type="text" id="scheduleName" name="scheduleName" placeholder="Enter schedule name">
        <h2>Number of Courses</h2>
        <!--<input type="number" id="numCourses" max="6" oninput="validateInput(this, 6, 4)">-->
        <select name="numCourses" id="numCourses" required>
            <option value="4">4 (12-14 credits)</option>
            <option value="5">5 (15-17 credits)</option>
            <option value="6">6 (18-20 credits)</option>
        </select>
    </div>
    <!--
    <div class="box">
        <h2>Academic Progress</h2>
        <p>Please select the semester you are CURRENTLY in</p>
        <ul class="radiolist">
            <li>
                <input type="radio" id="item1">
                <label for="item1">Freshman Fall</label>
            </li>
            <li>
                <input type="radio" id="item2">
                <label for="item2">Freshman Spring</label>
            </li>
            <li>
                <input type="radio" id="item3">
                <label for="item3">Sophomore Fall</label>
            </li>
            <li>
                <input type="radio" id="item4">
                <label for="item4">Sophomore Spring</label>
            </li>
            <li>
                <input type="radio" id="item5">
                <label for="item5">Junior Fall</label>
            </li>
            <li>
                <input type="radio" id="item6">
                <label for="item6">Junior Spring</label>
            </li>
            <li>
                <input type="radio" id="item7">
                <label for="item7">Senior Fall</label>
            </li>
            <li>
                <input type="radio" id="item8">
                <label for="item8">Senior Spring</label>
            </li>
        </ul>
    </div>
    -->
    <div class="box">
        <h2>Required Courses</h2>
        <p>Please select the required courses you want to take next semester:</p>
        <ul class="checklist" id="reqCors">
            <li>
                <input type="checkbox" id="item1" value="HASS 103 Writing and Communications Colloquium">
                <label for="item1">HASS 103 Writing and Communications Colloquium (formerly CAL 103)</label>
            </li>
            <li>
                <input type="checkbox" id="item2" value="HASS 105 Knowledge, Nature, Culture">
                <label for="item2">HASS 105 Knowledge, Nature, Culture (formerly CAL 105)</label>
            </li>
            <li>
                <input type="checkbox" id="item3" value="Science I PEP 111 or CH 115">
                <label for="item3">Science I (PEP 111 or CH 115)</label>
            </li>
            <li>
                <input type="checkbox" id="item4" value="Science II PEP 112, CH 116, or BIO 181">
                <label for="item4">Science II (PEP 112, CH 116, or BIO 181)</label>
            </li>
            <li>
                <input type="checkbox" id="item5" value="Science Lab PEP 221, CH 117, or BIO 182">
                <label for="item5">Science Lab (PEP 221, CH 117, or BIO 182)</label>
            </li>
            <li>
                <input type="checkbox" id="item6" value="MA 121/MA 122 Differential Calculus/Integral Calculus">
                <label for="item6">MA 121/MA 122 Differential Calculus/Integral Calculus</label>
            </li>
            <li>
                <input type="checkbox" id="item7" value="MA 125/MA 126 Vectors and Matrices/Multivariable Calculus I">
                <label for="item7">MA 125/MA 126 Vectors and Matrices/Multivariable Calculus I</label>
            </li>
            <li>
                <input type="checkbox" id="item8" value="MA 222 Probability and Statistics">
                <label for="item8">MA 222 Probability and Statistics</label>
            </li>
            <li>
                <input type="checkbox" id="item9" value="MA 331 Intermediate Statistics">
                <label for="item9">MA 331 Intermediate Statistics</label>
            </li>
            <li>
                <input type="checkbox" id="item10" value="CS 101 Research and Entrepreneurship in Computing">
                <label for="item10">CS 101 Research and Entrepreneurship in Computing</label>
            </li>
            <li>
                <input type="checkbox" id="item11" value="CS 115 Introduction to Computer Science">
                <label for="item11">CS 115 Introduction to Computer Science</label>
            </li>
            <li>
                <input type="checkbox" id="item12" value="CS 135 Discrete Structure">
                <label for="item12">CS 135 Discrete Structure</label>
            </li>
            <li>
                <input type="checkbox" id="item13" value="CS 284 Data Structure">
                <label for="item13">CS 284 Data Structure</label>
            </li>
            <li>
                <input type="checkbox" id="item14" value="CS 334 Theory of Computation">
                <label for="item14">CS 334 Theory of Computation</label>
            </li>
            <li>
                <input type="checkbox" id="item15" value="CS 382 Computer Architecture and Organization">
                <label for="item15">CS 382 Computer Architecture and Organization</label>
            </li>
            <li>
                <input type="checkbox" id="item16" value="CS 385 Algorithms">
                <label for="item16">CS 385 Algorithms</label>
            </li>
            <li>
                <input type="checkbox" id="item17" value="CS 392 Systems Programming">
                <label for="item17">CS 392 Systems Programming</label>
            </li>
            <li>
                <input type="checkbox" id="item18" value="CS 396 Security, Privacy and Society">
                <label for="item18">CS 396 Security, Privacy and Society</label>
            </li>
            <li>
                <input type="checkbox" id="item19" value="CS 423 Senior Design I">
                <label for="item19">CS 423 Senior Design I</label>
            </li>
            <li>
                <input type="checkbox" id="item20" value="CS 424 Senior Design II">
                <label for="item20">CS 424 Senior Design II</label>
            </li>
            <li>
                <input type="checkbox" id="item21" value="CS 496 Principles of Programming Languages">
                <label for="item21">CS 496 Principles of Programming Languages</label>
            </li>
            <li>
                <input type="checkbox" id="item22" value="CS Humanities HSS 371 or HPL 455">
                <label for="item22">CS Humanities (HSS 371 or HPL 455)</label>
            </li>
        </ul>        
    </div>
    <!--
    <div class="box">
        <h2>Remaining Electives</h2>
        <p>Please select the number of courses you have left to complete from each category:</p>
        <ul class="numlist" id="interests">
            <li>
                <input type="number" id="num1" max="6" oninput="validateInput(this, 6)">
                <label for="num1">Lower Humanities</label>
            </li>
            <li>
                <input type="number" id="num2" max="6" oninput="validateInput(this, 6)">
                <label for="num2">Upper Humanities</label>
            </li>
            <li>
                <input type="number" id="num3" max="11" oninput="validateInput(this, 11)">
                <label for="num3">Technical Elective</label>
            </li>
            <li>
                <input type="number" id="num4" max="2" oninput="validateInput(this, 2)">
                <label for="num4">Science/Math Elective</label>
            </li>
            <li>
                <input type="number" id="num5" max="2" oninput="validateInput(this, 2)">
                <label for="num5">General Elective</label>
            </li>
        </ul>
    </div>-->
    <script>
        let sharedArray = []
        function updateSharedArray(addItems, items) {
                if (addItems) {
                    sharedArray = [...sharedArray, ...items];
                } else {
                    sharedArray = sharedArray.filter(item => !items.includes(item));
                }
        }
        function handleListSelection(listId) {
            const isChecked = document.getElementById(listId).checked;
            if (listId === 'int1') {
                updateSharedArray(isChecked, Tech_App);
            } else if (listId === 'int2') {
                updateSharedArray(isChecked, Tech_Theory);
            } else if (listId === 'int3'){
                updateSharedArray(isChecked, Gen_Hum_low);
            } else if (listId === 'int4'){
                updateSharedArray(isChecked, Hum_Lit_low);
            } else if (listId === 'int5'){
                updateSharedArray(isChecked, Gen_Bus_low);
            }
            console.log(sharedArray);
            let string = JSON.stringify(sharedArray)
            localStorage.setItem('Recommendations', JSON.stringify(sharedArray));
        }
        
    </script>
    <div class="box">
        <h2>Interests</h2>
        <p>Please select what subjects you are interested in:</p>
        <ul class="checklist" id="ints">
            <li>
                <input type="checkbox" id="int1" onclick="handleListSelection('int1')">
                <label for="int1">Technology</label>
            </li>
            <li>
                <input type="checkbox" id="int2" onclick="handleListSelection('int2')">
                <label for="int2">Science</label>
            </li>
            <li>
                <input type="checkbox" id="int3" onclick="handleListSelection('int3')">
                <label for="int3">Humanities</label>
            </li>
            <li>
                <input type="checkbox" id="int4" onclick="handleListSelection('int4')">
                <label for="int4">Business</label>
            </li>
            <li>
                <input type="checkbox" id="int5" onclick="handleListSelection('int5')">
                <label for="int5">Engineering</label>
            </li>
        </ul>
    </div>
    <div class="save-bubuttontton-container">
        <button class=" save-button" onclick="submitSchedule(event)">Continue</button>
    </div>
    <script src="auth.js"></script>
    <script>
        const courseRequirements = {
            "HASS 103 Writing and Communications Colloquium": { prerequisites: [], corequisites: [] },
            "HASS 105 Knowledge, Nature, Culture": { prerequisites: [], corequisites: [] },
            "Science I (PEP 111 or CH 115)": { prerequisites: [], corequisites: [] },
            "Science II (PEP 112, CH 116, or BIO 181)": { prerequisites: ["Science I (PEP 111 or CH 115)"], corequisites: [] },
            "Science Lab (PEP 221, CH 117, or BIO 182)": { prerequisites: [], corequisites: [] },
            "MA 121/MA 122 Differential Calculus/Integral Calculus": { prerequisites: [], corequisites: [] },
            "MA 125/MA 126 Vectors and Matrices/Multivariable Calculus I": { prerequisites: ["MA 121/MA 122 Differential Calculus/Integral Calculus"], corequisites: [] },
            "MA 222 Probability and Statistics": { prerequisites: ["MA 125/MA 126 Vectors and Matrices/Multivariable Calculus I"], corequisites: [] },
            "MA 331 Intermediate Statistics": { prerequisites: ["MA 222 Probability and Statistics"], corequisites: [] },
            "CS 101 Research and Entrepreneurship in Computing": { prerequisites: [], corequisites: [] },
            "CS 115 Introduction to Computer Science": { prerequisites: [], corequisites: [] },
            "CS 135 Discrete Structure": { prerequisites: ["CS 115 Introduction to Computer Science"], corequisites: [] },
            "CS 284 Data Structure": { prerequisites: ["CS 115 Introduction to Computer Science"], corequisites: ["CS 135 Discrete Structure"] },
            "CS 334 Theory of Computation": { prerequisites: ["CS 135 Discrete Structure", "CS 385 Algorithms"], corequisites: [] },
            "CS 382 Computer Architecture and Organization": { prerequisites: ["CS 284 Data Structure"], corequisites: [] },
            "CS 385 Algorithms": { prerequisites: ["CS 284 Data Structure"], corequisites: [] },
            "CS 392 Systems Programming": { prerequisites: ["CS 382 Computer Architecture and Organization", "CS 385 Algorithms"], corequisites: [] },
            "CS 396 Security, Privacy and Society": { prerequisites: ["CS 392 Systems Programming"], corequisites: [] },
            "CS 423 Senior Design I": { prerequisites: ["CS 385 Algorithms"], corequisites: [] },
            "CS 424 Senior Design II": { prerequisites: ["CS 423 Senior Design I"], corequisites: [] },
            "CS 496 Principles of Programming Languages": { prerequisites: ["CS 385 Algorithms"], corequisites: [] },
            "CS Humanities (HSS 371 or HPL 455)": { prerequisites: [], corequisites: [] },
        };
        const Tech_App= ["CS 522 Mobile Systems and Applications", "CS 546 Web Programming", "CS 545 Human-Computer Interaction", "CS 566 Smartphone and Mobile Security", "CS 146 Introduction to Web Programming and Project Development", "CS 370 Creative Problem Solving and Team Programming", "CS 574 Object-Oriented Analysis and Design", "CS 537 Interactive Computer Graphics", "CS 526 Enterprise and Cloud Computing", "CS 548 Enterprise Software Architecture and Design", "CS 597 User Experience Design and Programming", "CS 609 Data Management and Exploration on the Web"]
        const Tech_Theory= ["CS 442 Database Management Systems ", "CS 503 Discrete Mathematics for Cryptography", "CS 579 Foundations of Cryptography", "CS 643 Formal Verification of Software", "CS 601 Algorithmic Complexity"]
        const Gen_Hum_low= ["HAR 144 Introduction to Photography", "HAR 260 Game Design 1", "HHS 125 U.S. History to 1865", "HHS 126 U.S. History since 1865", "HLI 116 Analysis of Literary Forms", "HLI 227 Introduction to Poetry Writing", "HMU 192 Music Appreciation I", "HMU 201 Music Theory I", "HQSS 141 Introduction to Sociology", "HQSS 175 Introduction to Psychology"]
        const Hum_Lit_low= ["HLI 105 Special Topics in Literature", "HLI 113 Western Literature: Classical Literature", "HLI 114 Western Literature: Classical Literature", "HLI  115 The English Language: Language of Ideas", "HLI 116 Analysis of Literary Forms", "HLI 117 Colonial and Romantic American Literature", "HLI 201 Introduction to Theater", "HLI 220 Images of Science in Literature", "HLI 221 Introduction to Cinema", "HLI 221 Introduction to Cinema", "HLI 223 Introduction to Fiction Writing", "HLI 225 Introduction to Screenwriting", "HLI 227 Introduction to Poetry Writing", "HLI 229 Nature Writing: Identity and Place"]
        const Gen_Bus_low= ["BT 200: Financial Accounting", "BT 221 Statistics", "BT 243 Macroeconomics", "BT 244 Microeconomics"]
        // Array to store checked items
        const checkedItems = [];

        // Get all checkbox elements
        const checkboxes = document.querySelectorAll('.checklist input[type="checkbox"]');

        // Add event listeners to each checkbox
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', (event) => {
                const value = event.target.value;
                if (event.target.checked) {
                    checkedItems.push(value);
                } else {
                    const index = checkedItems.indexOf(value);
                    if (index !== -1) {
                        checkedItems.splice(index, 1);
                    }
                }
                console.log(checkedItems); // Log the updated array
            });
        });

        // Check numboxes
        function validateInput(input, max, min=0) {
            input.value = input.value.replace(/[^0-9]/g, '');
            if (parseInt(input.value) > max) {
                input.value = max; // Reset to the maximum allowed value
                alert("The maximum number of allowed courses is " + max.toString() + ".");
            }
            if (parseInt(input.value) < min) {
                input.value = min; // Reset to the minimum allowed value
                alert("The minimum number of allowed courses is " + min.toString() + ".");
            }
        }

        function validateRequirements(selectedCourses) {
            let errorMessage = "";

            // Loop through the selected courses
            for (const course of selectedCourses) {
                const prerequisites = courseRequirements[course]?.prerequisites || [];
                
                // Check if a prerequisite is selected without the course that depends on it
                for (const prereq of prerequisites) {
                    // If the prerequisite is in selectedCourses but the course is not, alert
                    if (selectedCourses.includes(prereq)) {
                        errorMessage += `You cannot take ${course} without completing its prerequisite ${prereq}.\n`;
                    }
                }
            }

            // Check for missing corequisites
            for (const course of selectedCourses) {
                const corequisites = courseRequirements[course]?.corequisites || [];
                for (const coreq of corequisites) {
                    if (!selectedCourses.includes(coreq)) {
                        errorMessage += `Warning: ${course} requires the corequisite ${coreq}, which has not been selected.\n`;
                    }
                }
            }

            return errorMessage;
        }

    function submitSchedule(event) {
        event.preventDefault();

        const scheduleNameInput = document.getElementById("scheduleName").value.trim();
        const numCoursesInput = document.getElementById("numCourses").value;

        if (!scheduleNameInput) {
            alert("Please enter a Schedule Name before creating your schedule.");
            return;
        }

        // Collect selected courses
        const selectedCourses = [];
        document.querySelectorAll('#reqCors input[type="checkbox"]:checked').forEach(checkbox => {
            selectedCourses.push(checkbox.value);
        });

        // Validate selected courses
        const validationMessage = validateRequirements(selectedCourses);
        if (validationMessage.includes("cannot take")) {
            alert(validationMessage);
            return;
        } else if (validationMessage.includes("Warning")) {
            alert(validationMessage); // Allow submission but warn for missing corequisites
        }

        // Save data to localStorage
        localStorage.setItem('scheduleName', scheduleNameInput);
        localStorage.setItem('numCourses', numCoursesInput);
        localStorage.setItem('selectedCourses', JSON.stringify(selectedCourses));

        window.location.href = 'Recommendations.html';
        }
    </script>
</body>
</html>
